import{o as k,u as R,r as _,j as t,q as P,B as u,h as x,t as v,Z as o,w as A,aH as B,a0 as g,T as p,v as i,I as n,l as I,S as O,aI as N,aJ as E,aK as C,d as h}from"./index-DqWJ4ltY.js";const z=k(()=>{const{orderStore:r,modalStore:y,productStore:U}=R(),[j,D]=_.useState(!1);_.useEffect(()=>{r.orderStoreClear("direct")},[]),_.useEffect(()=>{let s={};j?(s={recipient_name:r.directOrderInfo?.customer_name,recipient_phone_number:r.directOrderInfo?.customer_phone_number,recipient_postal_code:r.directOrderInfo?.customer_postal_code,recipient_address:r.directOrderInfo?.customer_address,recipient_address_detail:r.directOrderInfo?.customer_address_detail},r.setDirectOrderInfo(s)):(s={recipient_name:"",recipient_phone_number:"",recipient_postal_code:"",recipient_address:"",recipient_address_detail:""},r.setDirectOrderInfo(s))},[j]);const f=(s,a)=>{switch(s){case"discount":if(isNaN(a))return alert("할인 금액은 숫자만 입력할 수 있습니다."),r.setDirectOrderInfo({discount_amount:""}),!1;if(a<0)return alert("할인 금액은 0원 이상이어야 합니다."),r.setDirectOrderInfo({discount_amount:""}),!1;if(a>r.totalProductAmount)return alert("할인 금액은 총 상품 금액을 초과할 수 없습니다."),r.setDirectOrderInfo({discount_amount:""}),!1;break;case"packname":const c=/^[가-힣A-Za-z0-9]{2,10}$/,l=/[ㄱ-ㅎㅏ-ㅣ]/;if(!c.test(a))return alert("팩네임은 한글/영문/숫자 2~10글자, 공백 불가입니다."),!1;if(l.test(a))return alert("팩네임에 자음 또는 모음을 단독으로 사용할 수 없습니다."),!1;break;case"number":if(!/^[0-9]+$/.test(a))return alert("숫자만 입력해주세요."),!1;break}},S=()=>{let s=r.directOrderInfo;console.log("이ㄸㅐ",E(s));const c=Object.keys(C).find(l=>{const d=s[l];return Array.isArray(d)?d.length===0:d===void 0||d===""});return c?(alert(`${C[c]} 값이 없습니다.`),!1):!0};return t.jsxs(t.Fragment,{children:[t.jsxs(b,{children:[t.jsx(P,{title:"수기주문"}),t.jsx(u,{type:"fill",size:"l",text:"저장",onClickFunc:async()=>{if(S())try{const a=r.formatOrderInfo();(await r.postDirectOrder(a)).data.data.result==="SUCCESS"?(x("success","수기 주문이 완료되었습니다."),r.orderStoreClear("direct")):x("warning","수기 주문을 실패하였습니다.")}catch{x("warning","수기 주문을 실패하였습니다.")}}})]}),t.jsxs(v,{children:[t.jsx(o,{children:"주문 상품"}),t.jsx(A,{data:r.directOrderInfo?.items,columns:B,store:r,checkType:"goodsInfo"}),t.jsxs(F,{children:[t.jsx(u,{type:"solid",size:"m",text:"선택 삭제",onClickFunc:async()=>{try{if(r.tableBaseStore.checkedMap.goodsInfo<=0){x("warning","선택된 상품이 없습니다.");return}await r.setProductDelete("goodsInfo"),r.tableBaseStore.setDeleteCheckedTypeMap("goodsInfo"),r.setTotalProductAmount(),x("success","상품이 삭제되었습니다.")}catch(s){console.log(s)}}}),t.jsx(u,{type:"fill",size:"m",text:"상품 추가",onClickFunc:async()=>{try{y.openModal({...g.PRODUCT_SEARCH_MODAL("direct"),async confirmFunc(s){s()},closeFunc:s=>{r.directOrderList=[],r.tableBaseStore.setDeleteCheckedTypeMap("direct"),s()}})}catch(s){console.log(s)}}})]})]}),t.jsxs(v,{children:[t.jsxs(w,{children:[t.jsxs(m,{children:[t.jsx(o,{children:"회원 선택"}),t.jsxs(p,{children:[t.jsxs(i,{children:[t.jsx("div",{className:"title",children:"회원 선택"}),t.jsx("div",{className:"content",children:t.jsx(u,{type:"fill",size:"m",text:"회원 선택",onClickFunc:async()=>{try{y.openModal({...g.USER_SEARCH_MODAL("user"),async confirmFunc(s){s()},closeFunc:s=>{r.searchUserList=[],r.tableBaseStore.setDeleteCheckedTypeMap("user"),s()}})}catch(s){console.log(s)}}})})]}),t.jsxs(i,{children:[t.jsx("div",{className:"title",children:"회원 ID"}),t.jsx("div",{className:"content",children:t.jsx(n,{inputType:"text",width:"fill",placeholder:"회원을 선택해주세요.",value:r.directOrderInfo?.member_id||"",readOnly:!0,onChange:s=>{r.setDirectOrderInfo({member_id:s.target.value})}})})]})]})]}),t.jsxs(m,{children:[t.jsx(o,{children:"팩네임 설정"}),t.jsx(p,{children:t.jsxs(i,{children:[t.jsx("div",{className:"title",children:"팩네임"}),t.jsx("div",{className:"content",children:t.jsxs("div",{children:[t.jsx("p",{children:"한글/영문 2~10글자까지 입력 (띄어쓰기,자음·모음만 불가)"}),t.jsx(L,{children:t.jsx(n,{inputType:"text",width:"fill",maxlength:10,value:r.directOrderInfo?.pack_name||"",onBlur:s=>{f("packname",s.target.value)},onChange:s=>{r.setDirectOrderInfo({pack_name:s.target.value})}})})]})})]})})]})]}),t.jsxs(w,{children:[t.jsxs(m,{children:[t.jsx(o,{children:"주문자 정보"}),t.jsxs(p,{children:[t.jsxs(i,{children:[t.jsx("div",{className:"title",children:"주문자명"}),t.jsx("div",{className:"content",children:t.jsx(n,{inputType:"text",width:"fill",placeholder:"회원을 선택해주세요.",value:r.directOrderInfo?.customer_name||"",readOnly:!0,onChange:s=>{r.setDirectOrderInfo({customer_name:s.target.value})}})})]}),t.jsxs(i,{children:[t.jsx("div",{className:"title",children:"휴대폰번호"}),t.jsx("div",{className:"content",children:t.jsx(n,{inputType:"text",width:"fill",placeholder:"회원을 선택해주세요.",value:r.directOrderInfo?.customer_phone_number||"",readOnly:!0,onChange:s=>{r.setDirectOrderInfo({customer_phone_number:s.target.value})}})})]}),t.jsxs(i,{children:[t.jsx("div",{className:"title",children:"주소"}),t.jsx("div",{className:"content",children:t.jsxs("div",{className:"flex jc-center al-center fd-column gap-15",children:[t.jsxs("div",{className:"flex al-center gap-10",children:[t.jsx(n,{inputType:"text",placeholder:"주소 버튼 클릭",value:r.directOrderInfo?.customer_postal_code||"",readOnly:!0,width:"fill"}),t.jsx(u,{type:"solid",size:"m",text:"주소",onClickFunc:async()=>{const c=window.screenX+window.innerWidth/2-250,l=window.screenY+window.innerHeight/2-600/2;new window.daum.Postcode({oncomplete:function(d){console.log(d),r.setDirectOrderInfo({customer_postal_code:d.zonecode,customer_address:d.address})},width:500,height:600}).open({left:c,top:l})}})]}),t.jsx(n,{inputType:"text",value:r.directOrderInfo?.customer_address||"",readOnly:!0,width:"fill",placeholder:"주소 버튼 클릭"}),t.jsx(n,{inputType:"text",placeholder:"나머지 주소 입력",value:r.directOrderInfo?.customer_address_detail||"",onChange:s=>{r.setDirectOrderInfo({customer_address_detail:s.target.value})},width:"fill"})]})})]}),t.jsxs(i,{children:[t.jsx("div",{className:"title",children:"배송메모"}),t.jsx("div",{className:"content",children:t.jsx(n,{inputType:"text",width:"fill",value:r.directOrderInfo?.customer_message||"",onChange:s=>{r.setDirectOrderInfo({customer_message:s.target.value})}})})]})]})]}),t.jsxs(m,{children:[t.jsxs(b,{children:[t.jsx(o,{children:"수취인 정보"}),t.jsx(n,{inputType:"checkbox",id:"pay-all-check",labelName:"주문자 정보와 동일",checked:j,onChange:s=>D(s.target.checked)})]}),t.jsxs(p,{children:[t.jsxs(i,{children:[t.jsx("div",{className:"title",children:"받는 분 성함"}),t.jsx("div",{className:"content",children:t.jsx(n,{inputType:"text",width:"fill",value:r.directOrderInfo?.recipient_name||"",onChange:s=>{r.setDirectOrderInfo({recipient_name:s.target.value})}})})]}),t.jsxs(i,{children:[t.jsx("div",{className:"title",children:"받는 분 연락처"}),t.jsx("div",{className:"content",children:t.jsx(n,{inputType:"text",width:"fill",placeholder:"숫자만 입력해주세요.",value:r.directOrderInfo?.recipient_phone_number||"",onBlur:s=>f("number",s.target.value),onChange:s=>{r.setDirectOrderInfo({recipient_phone_number:s.target.value})}})})]}),t.jsxs(i,{children:[t.jsx("div",{className:"title",children:"주소"}),t.jsx("div",{className:"content",children:t.jsxs("div",{className:"flex jc-center al-center fd-column gap-15",children:[t.jsxs("div",{className:"flex al-center gap-10",children:[t.jsx(n,{inputType:"text",placeholder:"주소 버튼 클릭",value:r.directOrderInfo?.recipient_postal_code||"",readOnly:!0,width:"fill"}),t.jsx(u,{type:"solid",size:"m",text:"주소",onClickFunc:async()=>{const c=window.screenX+window.innerWidth/2-250,l=window.screenY+window.innerHeight/2-600/2;new window.daum.Postcode({oncomplete:function(d){r.setDirectOrderInfo({recipient_postal_code:e.target.value}),r.setDirectOrderInfo({recipient_address:e.target.value})},width:500,height:600}).open({left:c,top:l})}})]}),t.jsx(n,{inputType:"text",placeholder:"주소 버튼 클릭",value:r.directOrderInfo?.recipient_address||"",readOnly:!0,width:"fill"}),t.jsx(n,{inputType:"text",placeholder:"내용을 입력해 주세요.",onChange:s=>{r.setDirectOrderInfo({recipient_address_detail:s.target.value})},value:r.directOrderInfo?.recipient_address_detail||"",width:"fill"})]})})]}),t.jsxs(i,{children:[t.jsx("div",{className:"title",children:"배송메모"}),t.jsx("div",{className:"content",children:t.jsx(n,{inputType:"text",value:r.directOrderInfo?.recipient_message||"",onChange:s=>{r.setDirectOrderInfo({recipient_message:s.target.value})}})})]})]})]})]})]}),t.jsxs(v,{children:[t.jsxs(T,{children:[t.jsx(o,{children:"결제정보"}),t.jsxs(p,{children:[t.jsxs(i,{children:[t.jsx("div",{className:"title",children:"상품 합계금액"}),t.jsxs("div",{className:"content",children:[I(r.totalProductAmount),"원"]})]}),t.jsxs(i,{children:[t.jsx("div",{className:"title",children:"배송비"}),t.jsx("div",{className:"content",children:r.totalProductAmount>=2e4?"0원":"3,000원"})]}),t.jsxs(i,{children:[t.jsx("div",{className:"title",children:"추가 할인"}),t.jsx("div",{className:"content",children:t.jsx(n,{inputType:"text",value:r.directOrderInfo?.discount_amount||"",placeholder:"숫자만 입력",onBlur:s=>{f("discount",s.target.value)},onChange:s=>{r.setDirectOrderInfo({discount_amount:s.target.value})}})})]}),t.jsxs(i,{children:[t.jsx("div",{className:"title",children:"최종 결제금액"}),t.jsx("div",{className:"content",children:(()=>{const s=r.totalProductAmount>=2e4?0:3e3,a=parseInt(r.directOrderInfo?.discount_amount||0)||0,c=r.totalProductAmount+s-a;return`${I(c)}원`})()})]})]})]}),t.jsxs(T,{children:[t.jsx(o,{children:"결제 방법 설정"}),t.jsxs(M,{children:[t.jsx(n,{labelFor:"SUBSCRIPTION",labelName:"정기결제",inputType:"radio",name:"buy_type_group",id:"SUBSCRIPTION",checked:r.paymentType==="SUBSCRIPTION",onChange:()=>r.setPaymentType("SUBSCRIPTION")}),t.jsx(n,{labelFor:"ORDER",labelName:"한번만 구매",inputType:"radio",name:"buy_type_group",id:"ORDER",checked:r.paymentType==="ORDER",onChange:()=>r.setPaymentType("ORDER")})]}),t.jsx(p,{children:r.paymentType==="SUBSCRIPTION"?t.jsxs(i,{children:[t.jsx("div",{className:"title",children:"정기카드 결제 선택"}),t.jsx("div",{className:"content",children:r.searchCreditCardList?r.searchCreditCardList.length===0?t.jsx("p",{children:"등록된 카드가 없습니다."}):t.jsx("div",{className:"subs-card",children:t.jsx(O,{option:r.searchCreditCardList??[],placeholder:"카드 선택",value:r.searchCreditCardList.find(s=>s.label===r.directOrderInfo?.cardName)||null,type:"solid",onChange:async s=>{r.setCardId(s.value,s.label)}})}):t.jsx("p",{children:"회원을 선택해주세요."})})]}):t.jsxs(t.Fragment,{children:[t.jsxs(i,{children:[t.jsxs("div",{className:"title",children:["주민번호 앞 6자리 ",t.jsx("br",{}),"또는 사업자 번호"]}),t.jsx("div",{className:"content",children:t.jsx(n,{inputType:"text",value:r.directOrderInfo?.card_payment?.birth_or_corp_number||"",onChange:s=>{r.setDirectOrderInfo({card_payment:{birth_or_corp_number:s.target.value}})}})})]}),t.jsxs(i,{children:[t.jsx("div",{className:"title",children:"카드번호"}),t.jsx("div",{className:"content",children:t.jsx(n,{inputType:"text",maxlength:19,placeholder:"하이픈(-)없이 숫자만 입력",value:r.directOrderInfo?.card_payment?.card_number||"",onChange:s=>{r.setDirectOrderInfo({card_payment:{card_number:s.target.value}})}})})]}),t.jsxs(i,{children:[t.jsx("div",{className:"title",children:"카드 유효기간 (YYMM)"}),t.jsx("div",{className:"content",children:t.jsx(n,{inputType:"text",maxlength:4,placeholder:"YYMM",value:(r.directOrderInfo?.card_payment?.expire_year||"")+(r.directOrderInfo?.card_payment?.expire_month||""),onChange:s=>{const a=s.target.value.replace(/\D/g,""),c=a.slice(0,2),l=a.slice(2,4);r.setDirectOrderInfo({card_payment:{expire_year:c,expire_month:l}})}})})]}),t.jsxs(i,{children:[t.jsx("div",{className:"title",children:"비밀번호 (2자리)"}),t.jsx("div",{className:"content",children:t.jsx(n,{inputType:"password",maxlength:2,placeholder:"••",value:r.directOrderInfo?.card_payment?.password||"",onChange:s=>{r.setDirectOrderInfo({card_payment:{password:s.target.value}})}})})]}),t.jsxs(i,{children:[t.jsx("div",{className:"title",children:"할부기간"}),t.jsx("div",{className:"content",children:t.jsx("div",{className:"select-type",children:t.jsx(O,{placeholder:"할부기간",option:N,type:"solid",value:N.find(s=>s.value===String(r.directOrderInfo?.card_payment?.installment_months))||null,onChange:async s=>{r.setDirectOrderInfo({card_payment:{installment_months:s.value}})}})})})]})]})})]})]})]})}),w=h.div`
  display: flex;
  gap: 50px;
  & + & {
    margin-top: 50px;
  }
`,m=h.article`
  flex: 1;
`,T=h.article`
  & + & {
    margin-top: 50px;
  }
  .subs-card {
    width: 300px;
  }
`,F=h.div`
  display: flex;
  justify-content: space-between;
  margin-top: 20px;
`,b=h.div`
  display: flex;
  justify-content: space-between;
`,M=h.div`
  display: flex;
  margin: 20px 0;
`,L=h.div`
  margin-top: 10px;
`;export{z as default};
