import{o as _,a as D,b as N,u as k,p as I,r as R,j as a,q as w,t as g,T as E,v as c,S as u,as as x,I as o,z as O,h as m,A as L,D as z,at as P,au as y,av as F,F as W,B as p,G as A,J as U,K as $,N as Q,x as B,y as j,P as q,aw as v,R as C,w as M,ax as K,X as V,d as G}from"./index-_13rErVL.js";import{D as H}from"./DualDatePicker-DBN1_Ua6.js";import{D as J}from"./down-ico-6F8xpGpd.js";const se=_(()=>{const f=D(),S=N(),{orderStore:e}=k(),T=I(S.search),n=async(s,t,r,d=void 0)=>{try{d&&e.clearParams();let l=e.tableBaseStore.searchParams;t&&(l.size=t),s&&(l.page=s),r&&(l.sort=r);const h=B(l),i=j(h);f(`${S.pathname}${i}`),await e.orderFetchTable(i)}catch(l){console.log(l)}};return R.useEffect(()=>(e.setCurrentParams(T).catch(s=>{console.log(s)}),()=>{e.orderStoreClear()}),[]),a.jsxs(a.Fragment,{children:[a.jsx(w,{title:"주문 조회"}),a.jsxs(g,{children:[a.jsxs(E,{children:[a.jsxs(c,{children:[a.jsx("div",{className:"title",children:"검색어"}),a.jsxs("div",{className:"content",children:[a.jsx("div",{className:"select-type",children:a.jsx(u,{option:x,size:"m",type:"solid",round:!0,placeholder:"선택",onChange:s=>{e.tableBaseStore.setParamsChange("selectWord","",!0),e.tableBaseStore.setParamsChange("selectType",s.value,!0)},value:x.find(s=>s.value===e.tableBaseStore.searchParams.selectSearch?.selectType)||null})}),a.jsx(o,{inputType:"text",placeholder:"입력해주세요",width:"fill",value:e.tableBaseStore.searchParams.selectSearch?.selectWord,onChange:s=>{const t=s.target.value;e.tableBaseStore.searchParams.selectSearch.selectType==="customer_phone_number"&&!z(t)||e.tableBaseStore.setParamsChange("selectWord",t,!0)},onFocus:()=>{if(e.tableBaseStore.searchParams.selectSearch.selectType==="customer_phone_number"){const s=L(e.tableBaseStore.searchParams.selectSearch.selectWord);e.tableBaseStore.setParamsChange("selectWord",s,!0)}},onBlur:s=>{const t=s.target.value;if(e.tableBaseStore.searchParams.selectSearch.selectType==="phone"){const r=O(t);if(t.replace(/\D/g,"").length>11){m("warning","전화번호는 최소 11자 입니다."),memberStore.tableBaseStore.setParamsChange("selectWord","",!0);return}e.tableBaseStore.setParamsChange("selectWord",r,!0)}}})]})]}),a.jsxs(c,{children:[a.jsx("div",{className:"title",children:"기간 검색"}),a.jsxs("div",{className:"content",children:[a.jsx(H,{startDate:e.tableBaseStore.searchParams.from?new Date(e.tableBaseStore.searchParams.from):null,endDate:e.tableBaseStore.searchParams.to?new Date(e.tableBaseStore.searchParams.to):null,onStartDateChange:s=>e.tableBaseStore.setStartDate(s),onEndDateChange:s=>e.tableBaseStore.setEndDate(s),placeholderTextStart:"시작 날짜 선택",placeholderTextEnd:"종료 날짜 선택"}),a.jsx(X,{children:P.length>0&&P.map(s=>a.jsx("div",{className:`date-select-list ${e.getActiveDateKey()===s.value?"active":""}`,onClick:()=>e.setQuickDateSelect(s.value),children:s.label},s.value))})]})]}),a.jsxs(c,{children:[a.jsx("div",{className:"title",children:"구매 타입"}),a.jsxs("div",{className:"content",children:[a.jsx(o,{labelFor:"all",labelName:"전체",inputType:"radio",name:"buy_type_group",id:"all",checked:e.tableBaseStore.searchParams.order_type==="all",onChange:()=>{e.tableBaseStore.setParamsChange("order_type","all")}}),a.jsx(o,{labelFor:"ORDER",labelName:"한번만 구매",inputType:"radio",name:"buy_type_group",id:"ORDER",checked:e.tableBaseStore.searchParams.order_type==="ORDER",onChange:()=>{e.tableBaseStore.setParamsChange("order_type","ORDER")}}),a.jsx(o,{labelFor:"SUBSCRIPTION",labelName:"구독",inputType:"radio",name:"buy_type_group",id:"SUBSCRIPTION",checked:e.tableBaseStore.searchParams.order_type==="SUBSCRIPTION",onChange:()=>{e.tableBaseStore.setParamsChange("order_type","SUBSCRIPTION")}})]})]}),a.jsxs(c,{children:[a.jsx("div",{className:"title",children:"결제 수단"}),a.jsxs("div",{className:"content",children:[a.jsx(o,{inputType:"checkbox",id:"pay-all-check",labelName:"전체",checked:e.tableBaseStore.searchParams.provider==="all",onChange:s=>{s.target.checked&&(e.tableBaseStore.setParamsChange("provider","all"),e.tableBaseStore.setSearchCheckedAll(!0))}}),y.map((s,t)=>{const r=e.tableBaseStore.searchParams.provider||"",l=(r==="all"?[]:r.split(",")).includes(s.value);return a.jsx("div",{children:a.jsx(o,{inputType:"checkbox",id:`pay-check-${t}`,labelName:s.label,checked:l,onChange:h=>{const i=h.target.checked;e.tableBaseStore.setSearchCheckedSingle(i,s.value,y,"provider");const b=e.tableBaseStore.searchParams.provider||"";(b==="all"?[]:b.split(",").filter(Boolean)).length===0&&e.tableBaseStore.setParamsChange("provider","all")}})},t)})]})]}),a.jsxs(c,{children:[a.jsx("div",{className:"title",children:"주문 상태"}),a.jsxs("div",{className:"content wrap",children:[a.jsx(o,{labelFor:"all_state",labelName:"전체",inputType:"radio",name:"status_type_group",id:"all_state",checked:e.tableBaseStore.searchParams.status==="all",onChange:()=>{e.tableBaseStore.setParamsChange("status","all")}}),F.map((s,t)=>a.jsx("div",{children:a.jsx(o,{labelFor:s.value,labelName:s.label,inputType:"radio",name:"status_type_group",id:s.value,checked:e.tableBaseStore.searchParams.status===s.value,onChange:()=>{e.tableBaseStore.setParamsChange("status",s.value)}})},t))]})]})]}),a.jsxs(W,{children:[a.jsx(p,{type:"solid",size:"xl",text:"초기화",icon:()=>a.jsx(A,{color:"#899854",size:16}),onClickFunc:async()=>{await n(1,10,"asc",!0)}}),a.jsx(p,{type:"fill",size:"xl",text:"검색",onClickFunc:async()=>{await n(1,void 0,e.tableBaseStore.searchParams.sort,!1)}})]})]}),a.jsxs(g,{children:[a.jsxs(U,{children:[a.jsxs($,{children:[a.jsxs("div",{className:"summary",children:["검색: ",a.jsx("span",{children:e.orderList.length??0}),"명"]}),a.jsx("span",{children:"/"}),a.jsxs("div",{className:"summary",children:["전체: ",a.jsx("span",{children:e.orderListPageInfo?.total_elements??0}),"명"]})]}),a.jsxs(Q,{$gap:10,children:[a.jsx(p,{type:"fill",size:"m",text:"다운로드",round:!0,icon:()=>a.jsx("img",{src:J,alt:"다운로드"}),onClickFunc:async()=>{try{const s=B(e.tableBaseStore.searchParams),t=j(s),r=await e.getOrderListDown(t);r?.data?(q(r.data,"주문 조회 리스트"),e.tableBaseStore.setChecked()):m("warning","다운로드 데이터가 없습니다.")}catch(s){console.error("다운로드 실패",s),m("warning","다운로드 중 오류가 발생했습니다.")}}}),a.jsx(u,{option:v,size:"m",type:"solid",round:!0,placeholder:"선택",onChange:async s=>{await n(e.tableBaseStore.searchParams.page,e.tableBaseStore.searchParams.size,s.value,!1)},value:v.find(s=>s.value===e.tableBaseStore.searchParams.sort)||null}),a.jsx(u,{option:C,size:"m",type:"solid",round:!0,placeholder:"선택",onChange:async s=>{await n(1,s.value,e.tableBaseStore.searchParams.sort,!1)},value:C.find(s=>s.value===e.tableBaseStore.searchParams.size)||null})]})]}),a.jsx(M,{data:e.orderList,columns:K,offset:e.tableBaseStore.searchParams.page,dataAllCount:e.orderListPageInfo?.total_elements}),e.orderListPageInfo&&e.orderListPageInfo.total_elements>10&&a.jsx(V,{totalItems:e.orderListPageInfo.total_elements??0,itemCountPerPage:e.tableBaseStore.searchParams?.size,pageCount:5,currentPage:e.tableBaseStore.searchParams?.page,setPageIndex:async s=>{e.tableBaseStore.setParamsChange("page",s)},setPage:async s=>{await n(s,e.tableBaseStore.searchParams?.size,e.tableBaseStore.searchParams.sort,!1)}})]})]})}),X=G.div`
    display: flex;
    align-items: center;

    .date-select-list {
        width: 80px;
        height: 30px;
        font-size: 15px;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        border: 1px solid #eee;
        border-right: none;
        background-color: #fff;

        &:last-child {
            border-right: 1px solid #eee;
        }

        &.active {
            background-color: #333;
            color: #fff;
        }
    }
`;export{se as default};
