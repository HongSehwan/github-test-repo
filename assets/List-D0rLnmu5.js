import{o as f,a as y,b as _,u as N,p as T,r as D,j as e,q as k,t as p,T as w,v as n,I as r,z as L,h as u,A as I,D as z,ao as x,ap as b,F as E,B as m,G as A,J as F,K as O,N as W,x as S,P as $,S as j,aq as P,R as v,w as q,ar as Q,X as R,y as M,d as U}from"./index-_13rErVL.js";import{D as K}from"./DualDatePicker-DBN1_Ua6.js";import{D as G}from"./down-ico-6F8xpGpd.js";const Z=f(()=>{const C=y(),g=_(),{counselStore:a}=N(),B=T(g.search),i=async(s,t,o,d=void 0)=>{try{d&&a.clearParams();let l=a.tableBaseStore.searchParams;t&&(l.size=t),s&&(l.page=s),o&&(l.sort=o);const h=S(l),c=M(h);C(`${g.pathname}${c}`),await a.counselFetchTable(c)}catch(l){console.log(l)}};return D.useEffect(()=>(a.setCurrentParams(B).catch(s=>{console.log(s)}),()=>{a.counselStoreClear("list")}),[]),e.jsxs(e.Fragment,{children:[e.jsx(k,{title:"안심챗/콜 리스트"}),e.jsxs(p,{children:[e.jsxs(w,{children:[e.jsxs(n,{children:[e.jsx("div",{className:"title",children:"회원 이름"}),e.jsx("div",{className:"content",children:e.jsx(r,{inputType:"text",placeholder:"입력해주세요",width:"fill",value:a.tableBaseStore.searchParams.member_name,onChange:s=>{a.tableBaseStore.setParamsChange("member_name",s.target.value)}})})]}),e.jsxs(n,{children:[e.jsx("div",{className:"title",children:"예약자 이름"}),e.jsx("div",{className:"content",children:e.jsx(r,{inputType:"text",placeholder:"입력해주세요",width:"fill",value:a.tableBaseStore.searchParams.recipient_name,onChange:s=>{a.tableBaseStore.setParamsChange("recipient_name",s.target.value)}})})]}),e.jsxs(n,{children:[e.jsx("div",{className:"title",children:"담당자 이름"}),e.jsx("div",{className:"content",children:e.jsx(r,{inputType:"text",placeholder:"입력해주세요",width:"fill",value:a.tableBaseStore.searchParams.admin_name,onChange:s=>{a.tableBaseStore.setParamsChange("admin_name",s.target.value)}})})]}),e.jsxs(n,{children:[e.jsx("div",{className:"title",children:"담당자 배정 여부"}),e.jsxs("div",{className:"content",children:[e.jsx(r,{labelFor:"all",labelName:"전체",inputType:"radio",name:"assignment_status_group",id:"all",checked:a.tableBaseStore.searchParams.is_assigned==="all",onChange:()=>{a.tableBaseStore.setParamsChange("is_assigned","all")}}),e.jsx(r,{labelFor:"assigned",labelName:"배정",inputType:"radio",name:"assignment_status_group",id:"assigned",checked:a.tableBaseStore.searchParams.is_assigned==="assigned",onChange:()=>{a.tableBaseStore.setParamsChange("is_assigned","assigned")}}),e.jsx(r,{labelFor:"unassigned",labelName:"미배정",inputType:"radio",name:"assignment_status_group",id:"unassigned",checked:a.tableBaseStore.searchParams.is_assigned==="unassigned",onChange:()=>{a.tableBaseStore.setParamsChange("is_assigned","unassigned")}})]})]}),e.jsxs(n,{children:[e.jsx("div",{className:"title",children:"예약자 휴대폰 번호"}),e.jsx("div",{className:"content",children:e.jsx(r,{inputType:"text",placeholder:"입력해주세요",width:"fill",value:a.tableBaseStore.searchParams.recipient_phone_number,onChange:s=>{const t=s.target.value;z(t)&&a.tableBaseStore.setParamsChange("recipient_phone_number",t)},onFocus:()=>{const s=I(a.tableBaseStore.searchParams.recipient_phone_number);a.tableBaseStore.setParamsChange("recipient_phone_number",s)},onBlur:s=>{const t=s.target.value,o=L(t);if(t.replace(/\D/g,"").length>11){u("warning","전화번호는 최소 11자 입니다."),a.tableBaseStore.setParamsChange("recipient_phone_number","");return}a.tableBaseStore.setParamsChange("recipient_phone_number",o)}})})]}),e.jsxs(n,{children:[e.jsx("div",{className:"title",children:"주문번호"}),e.jsx("div",{className:"content",children:e.jsx(r,{inputType:"text",placeholder:"입력해주세요",width:"fill",value:a.tableBaseStore.searchParams.order_number,onChange:s=>{a.tableBaseStore.setParamsChange("order_number",s.target.value)}})})]}),e.jsxs(n,{children:[e.jsx("div",{className:"title",children:"예약날짜"}),e.jsxs("div",{className:"content",children:[e.jsx(K,{startDate:a.tableBaseStore.searchParams.from?new Date(a.tableBaseStore.searchParams.from):null,endDate:a.tableBaseStore.searchParams.to?new Date(a.tableBaseStore.searchParams.to):null,onStartDateChange:s=>a.tableBaseStore.setStartDate(s),onEndDateChange:s=>a.tableBaseStore.setEndDate(s),placeholderTextStart:"시작 날짜 선택",placeholderTextEnd:"종료 날짜 선택"}),e.jsx(H,{children:x.length>0&&x.map(s=>e.jsx("div",{className:`date-select-list ${a.getActiveDateKey()===s.value?"active":""}`,onClick:()=>a.setQuickDateSelect(s.value),children:s.label},s.value))})]})]}),e.jsxs(n,{children:[e.jsx("div",{className:"title",children:"상담 상태"}),e.jsxs("div",{className:"content",children:[e.jsx(r,{inputType:"checkbox",id:"list-all-check",labelName:"전체",checked:a.tableBaseStore.searchParams.status==="all",onChange:s=>{s.target.checked&&a.tableBaseStore.setParamsChange("status","all")}}),b.map((s,t)=>{const o=a.tableBaseStore.searchParams.status||"",l=(o==="all"?[]:o.split(",")).includes(s.value);return e.jsx("div",{children:e.jsx(r,{inputType:"checkbox",id:`list-check-${t}`,labelName:s.label,checked:l,onChange:h=>{a.tableBaseStore.setSearchCheckedSingle(h.target.checked,s.value,b,"status");const c=a.tableBaseStore.searchParams.status||"";(c==="all"?[]:c.split(",").filter(Boolean)).length===0&&a.tableBaseStore.setParamsChange("status","all")}})},t)})]})]})]}),e.jsxs(E,{children:[e.jsx(m,{type:"solid",size:"xl",text:"초기화",icon:()=>e.jsx(A,{color:"#899854",size:16}),onClickFunc:async()=>{await i(1,10,"desc",!0)}}),e.jsx(m,{type:"fill",size:"xl",text:"검색",onClickFunc:async()=>{await i(1,void 0,a.tableBaseStore.searchParams.sort,!1)}})]})]}),e.jsxs(p,{children:[e.jsxs(F,{children:[e.jsxs(O,{children:[e.jsxs("div",{className:"summary",children:["검색: ",e.jsx("span",{children:a.counselList.length??0}),"명"]}),e.jsx("span",{children:"/"}),e.jsxs("div",{className:"summary",children:["전체: ",e.jsx("span",{children:a.counselListPageInfo?.total_elements??0}),"명"]})]}),e.jsxs(W,{$gap:10,children:[e.jsx(m,{type:"fill",size:"m",text:"다운로드",round:!0,icon:()=>e.jsx("img",{src:G,alt:"다운로드"}),onClickFunc:async()=>{try{const s=S(a.tableBaseStore.searchParams),t=await a.getCounselListDown(s);t?.data?$(t.data,"안심콜 리스트"):u("warning","다운로드 데이터가 없습니다.")}catch(s){console.error("다운로드 실패",s),u("warning","다운로드 중 오류가 발생했습니다.")}}}),e.jsx(j,{option:P,size:"m",type:"solid",round:!0,placeholder:"선택",onChange:async s=>{await i(a.tableBaseStore.searchParams.page,a.tableBaseStore.searchParams.size,s.value,!1)},value:P.find(s=>s.value===a.tableBaseStore.searchParams.sort)||null}),e.jsx(j,{option:v,size:"m",type:"solid",round:!0,placeholder:"선택",onChange:async s=>{await i(1,s.value,a.tableBaseStore.searchParams.sort,!1)},value:v.find(s=>s.value===a.tableBaseStore.searchParams.size)||null})]})]}),e.jsx(q,{data:a.counselList,columns:Q,offset:a.tableBaseStore.searchParams.page,dataAllCount:a.counselListPageInfo?.total_elements}),a.counselListPageInfo&&a.counselListPageInfo.total_elements>10&&e.jsx(R,{totalItems:a.counselListPageInfo.total_elements??0,itemCountPerPage:a.tableBaseStore.searchParams?.size,pageCount:5,currentPage:a.tableBaseStore.searchParams?.page,setPageIndex:async s=>{a.tableBaseStore.setParamsChange("page",s)},setPage:async s=>{await i(s,a.tableBaseStore.searchParams?.size,a.tableBaseStore.searchParams.sort,!1)}})]})]})}),H=U.div`
    display: flex;
    align-items: center;

    .date-select-list {
        width: 80px;
        height: 30px;
        font-size: 15px;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        border: 1px solid #eee;
        border-right: none;
        background-color: #fff;

        &:last-child {
            border-right: 1px solid #eee;
        }

        &.active {
            background-color: #333;
            color: #fff;
        }
    }
`;export{Z as default};
