import{o as T,u as D,r as m,j as t,q as b,B as o,h as x,t as _,_ as d,w as S,aH as P,a0 as y,T as h,v as i,I as n,l as g,S as I,aI as k,d as a}from"./index-_13rErVL.js";const U=T(()=>{const{orderStore:s,modalStore:v,productStore:M}=D(),[f,w]=m.useState(!1),[B,E]=m.useState({});return m.useEffect(()=>{s.orderStoreClear("direct")},[]),m.useEffect(()=>{let r={};f?(r={recipient_name:s.directOrderInfo?.customer_name,recipient_phone_number:s.directOrderInfo?.customer_phone_number,recipient_postal_code:s.directOrderInfo?.customer_postal_code,recipient_address:s.directOrderInfo?.customer_address,recipient_address_detail:s.directOrderInfo?.customer_address_detail},s.setDirectOrderInfo(r)):(r={recipient_name:"",recipient_phone_number:"",recipient_postal_code:"",recipient_address:"",recipient_address_detail:""},s.setDirectOrderInfo(r))},[f]),t.jsxs(t.Fragment,{children:[t.jsxs(N,{children:[t.jsx(b,{title:"수기주문"}),t.jsx(o,{type:"fill",size:"l",text:"저장",onClickFunc:async()=>{try{const r=await s.setFinOrderData();console.log("작성 :",r),r.data.result==="SUCCESS"?(x("success","수기 주문이 완료되었습니다."),s.orderStoreClear("direct")):x("warning","수기 주문을 실패하였습니다.")}catch{x("warning","수기 주문을 실패하였습니다."),console.log(e)}}})]}),t.jsxs(_,{children:[t.jsx(d,{children:"주문 상품"}),t.jsx(S,{data:s.directOrderInfo?.items,columns:P,store:s,checkType:"goodsInfo"}),t.jsxs(R,{children:[t.jsx(o,{type:"solid",size:"m",text:"선택 삭제",onClickFunc:async()=>{try{if(s.tableBaseStore.checkedMap.goodsInfo<=0){x("warning","선택된 상품이 없습니다.");return}await s.setProductDelete("goodsInfo"),s.tableBaseStore.setDeleteCheckedTypeMap("goodsInfo"),s.setTotalProductAmount(),x("success","상품이 삭제되었습니다.")}catch(r){console.log(r)}}}),t.jsx(o,{type:"fill",size:"m",text:"상품 추가",onClickFunc:async()=>{try{v.openModal({...y.PRODUCT_SEARCH_MODAL("direct"),async confirmFunc(r){r()},closeFunc:r=>{s.directOrderList=[],s.tableBaseStore.setDeleteCheckedTypeMap("direct"),r()}})}catch(r){console.log(r)}}})]})]}),t.jsxs(_,{children:[t.jsxs(O,{children:[t.jsxs(j,{children:[t.jsx(d,{children:"회원 선택"}),t.jsxs(h,{children:[t.jsxs(i,{children:[t.jsx("div",{className:"title",children:"회원 선택"}),t.jsx("div",{className:"content",children:t.jsx(o,{type:"fill",size:"m",text:"회원 선택",onClickFunc:async()=>{try{v.openModal({...y.USER_SEARCH_MODAL("user"),async confirmFunc(r){r()},closeFunc:r=>{s.searchUserList=[],s.tableBaseStore.setDeleteCheckedTypeMap("user"),r()}})}catch(r){console.log(r)}}})})]}),t.jsxs(i,{children:[t.jsx("div",{className:"title",children:"회원 ID"}),t.jsx("div",{className:"content",children:t.jsx(n,{inputType:"text",width:"fill",value:s.directOrderInfo?.member_id||"",readOnly:!0,onChange:r=>{s.setDirectOrderInfo({member_id:r.target.value})}})})]})]})]}),t.jsxs(j,{children:[t.jsx(d,{children:"팩네임 설정"}),t.jsx(h,{children:t.jsxs(i,{children:[t.jsx("div",{className:"title",children:"팩네임"}),t.jsx("div",{className:"content",children:t.jsxs("div",{children:[t.jsx("p",{children:"한글/영문 2~10글자까지 입력 (띄어쓰기,자음·모음만 불가)"}),t.jsx(A,{children:t.jsx(n,{inputType:"text",width:"fill",value:s.directOrderInfo?.pack_name||"",onChange:r=>{s.setDirectOrderInfo({pack_name:r.target.value})}})})]})})]})})]})]}),t.jsxs(O,{children:[t.jsxs(j,{children:[t.jsx(d,{children:"주문자 정보"}),t.jsxs(h,{children:[t.jsxs(i,{children:[t.jsx("div",{className:"title",children:"주문자명"}),t.jsx("div",{className:"content",children:t.jsx(n,{inputType:"text",width:"fill",value:s.directOrderInfo?.customer_name||"",onChange:r=>{s.setDirectOrderInfo({customer_name:r.target.value})}})})]}),t.jsxs(i,{children:[t.jsx("div",{className:"title",children:"휴대폰번호"}),t.jsx("div",{className:"content",children:t.jsx(n,{inputType:"text",width:"fill",value:s.directOrderInfo?.customer_phone_number||"",onChange:r=>{s.setDirectOrderInfo({customer_phone_number:r.target.value})}})})]}),t.jsxs(i,{children:[t.jsx("div",{className:"title",children:"주소"}),t.jsx("div",{className:"content",children:t.jsxs("div",{className:"flex jc-center al-center fd-column gap-15",children:[t.jsxs("div",{className:"flex al-center gap-10",children:[t.jsx(n,{inputType:"text",placeholder:"내용을 입력해 주세요.",value:s.directOrderInfo?.customer_postal_code||"",readOnly:!0,width:"fill"}),t.jsx(o,{type:"solid",size:"m",text:"주소",onClickFunc:async()=>{const c=window.screenX+window.innerWidth/2-250,p=window.screenY+window.innerHeight/2-600/2;new window.daum.Postcode({oncomplete:function(u){console.log(u),s.setDirectOrderInfo({customer_postal_code:u.zonecode,customer_address:u.address})},width:500,height:600}).open({left:c,top:p})}})]}),t.jsx(n,{inputType:"text",value:s.directOrderInfo?.customer_address||"",readOnly:!0,width:"fill"}),t.jsx(n,{inputType:"text",placeholder:"내용을 입력해 주세요.",value:s.directOrderInfo?.customer_address_detail||"",onChange:r=>{s.setDirectOrderInfo({customer_address_detail:r.target.value})},width:"fill"})]})})]}),t.jsxs(i,{children:[t.jsx("div",{className:"title",children:"배송메모"}),t.jsx("div",{className:"content",children:t.jsx(n,{inputType:"text",width:"fill",value:s.directOrderInfo?.customer_message||"",onChange:r=>{s.setDirectOrderInfo({customer_message:r.target.value})}})})]})]})]}),t.jsxs(j,{children:[t.jsxs(N,{children:[t.jsx(d,{children:"수취인 정보"}),t.jsx(n,{inputType:"checkbox",id:"pay-all-check",labelName:"주문자 정보와 동일",checked:f,onChange:r=>w(r.target.checked)})]}),t.jsxs(h,{children:[t.jsxs(i,{children:[t.jsx("div",{className:"title",children:"받는 분 성함"}),t.jsx("div",{className:"content",children:t.jsx(n,{inputType:"text",width:"fill",value:s.directOrderInfo?.recipient_name||"",onChange:r=>{s.setDirectOrderInfo({recipient_name:r.target.value})}})})]}),t.jsxs(i,{children:[t.jsx("div",{className:"title",children:"받는 분 연락처"}),t.jsx("div",{className:"content",children:t.jsx(n,{inputType:"text",width:"fill",value:s.directOrderInfo?.recipient_phone_number||"",onChange:r=>{s.setDirectOrderInfo({recipient_phone_number:r.target.value})}})})]}),t.jsxs(i,{children:[t.jsx("div",{className:"title",children:"주소"}),t.jsx("div",{className:"content",children:t.jsxs("div",{className:"flex jc-center al-center fd-column gap-15",children:[t.jsxs("div",{className:"flex al-center gap-10",children:[t.jsx(n,{inputType:"text",placeholder:"내용을 입력해 주세요.",value:s.directOrderInfo?.recipient_postal_code||"",readOnly:!0,width:"fill"}),t.jsx(o,{type:"solid",size:"m",text:"주소",onClickFunc:async()=>{const c=window.screenX+window.innerWidth/2-250,p=window.screenY+window.innerHeight/2-600/2;new window.daum.Postcode({oncomplete:function(u){s.setDirectOrderInfo({recipient_postal_code:e.target.value}),s.setDirectOrderInfo({recipient_address:e.target.value})},width:500,height:600}).open({left:c,top:p})}})]}),t.jsx(n,{inputType:"text",placeholder:"내용을 입력해 주세요.",value:s.directOrderInfo?.recipient_address||"",readOnly:!0,width:"fill"}),t.jsx(n,{inputType:"text",placeholder:"내용을 입력해 주세요.",onChange:r=>{s.setDirectOrderInfo({recipient_address_detail:r.target.value})},value:s.directOrderInfo?.recipient_address_detail||"",width:"fill"})]})})]}),t.jsxs(i,{children:[t.jsx("div",{className:"title",children:"배송메모"}),t.jsx("div",{className:"content",children:t.jsx(n,{inputType:"text",value:s.directOrderInfo?.recipient_message||"",onChange:r=>{s.setDirectOrderInfo({recipient_message:r.target.value})}})})]})]})]})]})]}),t.jsxs(_,{children:[t.jsxs(C,{children:[t.jsx(d,{children:"결제정보"}),t.jsxs(h,{children:[t.jsxs(i,{children:[t.jsx("div",{className:"title",children:"상품 합계금액"}),t.jsxs("div",{className:"content",children:[g(s.totalProductAmount),"원"]})]}),t.jsxs(i,{children:[t.jsx("div",{className:"title",children:"배송비"}),t.jsx("div",{className:"content",children:s.totalProductAmount>=2e4?"0원":"3,000원"})]}),t.jsxs(i,{children:[t.jsx("div",{className:"title",children:"추가 할인"}),t.jsx("div",{className:"content",children:t.jsx(n,{inputType:"text",value:s.directOrderInfo?.discount_amount||"",onChange:r=>{s.setDirectOrderInfo({discount_amount:r.target.value})}})})]}),t.jsxs(i,{children:[t.jsx("div",{className:"title",children:"최종 결제금액"}),t.jsx("div",{className:"content",children:(()=>{const r=s.totalProductAmount>=2e4?0:3e3,l=parseInt(s.directOrderInfo?.discount_amount||0)||0,c=s.totalProductAmount+r-l;return`${g(c)}원`})()})]})]})]}),t.jsxs(C,{children:[t.jsx(d,{children:"결제 방법 설정"}),t.jsxs(F,{children:[t.jsx(n,{labelFor:"SUBSCRIPTION",labelName:"정기결제",inputType:"radio",name:"buy_type_group",id:"SUBSCRIPTION",checked:s.paymentType==="SUBSCRIPTION",onChange:()=>s.setPaymentType("SUBSCRIPTION")}),t.jsx(n,{labelFor:"ORDER",labelName:"한번만 구매",inputType:"radio",name:"buy_type_group",id:"ORDER",checked:s.paymentType==="ORDER",onChange:()=>s.setPaymentType("ORDER")})]}),t.jsx(h,{children:s.paymentType==="SUBSCRIPTION"?t.jsxs(i,{children:[t.jsx("div",{className:"title",children:"정기카드 결제 선택"}),t.jsx("div",{className:"content",children:s.searchCreditCardList?s.searchCreditCardList.length===0?t.jsx("p",{children:"등록된 카드가 없습니다."}):t.jsx(I,{option:s.searchCreditCardList??[],placeholder:"카드 선택",value:s.directOrderInfo?.cardName||"dfdfdf",type:"solid",onChange:async r=>{s.setCardId(r.value,r.label)}}):t.jsx("p",{children:"회원을 선택해주세요."})})]}):t.jsxs(t.Fragment,{children:[t.jsxs(i,{children:[t.jsxs("div",{className:"title",children:["주민번호 앞 6자리 ",t.jsx("br",{}),"또는 사업자 번호"]}),t.jsx("div",{className:"content",children:t.jsx(n,{inputType:"text",value:s.directOrderInfo?.card_payment?.birth_or_corp_number||"",onChange:r=>{s.setDirectOrderInfo({card_payment:{birth_or_corp_number:r.target.value}})}})})]}),t.jsxs(i,{children:[t.jsx("div",{className:"title",children:"카드번호"}),t.jsx("div",{className:"content",children:t.jsx(n,{inputType:"text",maxlength:19,placeholder:"하이픈(-)없이 숫자만 입력",value:s.directOrderInfo?.card_payment?.card_number||"",onChange:r=>{s.setDirectOrderInfo({card_payment:{card_number:r.target.value}})}})})]}),t.jsxs(i,{children:[t.jsx("div",{className:"title",children:"카드 유효기간 (YYMM)"}),t.jsx("div",{className:"content",children:t.jsx(n,{inputType:"text",maxlength:4,placeholder:"YYMM",value:(s.directOrderInfo?.card_payment?.expire_year||"")+(s.directOrderInfo?.card_payment?.expire_month||""),onChange:r=>{const l=r.target.value.replace(/\D/g,""),c=l.slice(0,2),p=l.slice(2,4);s.setDirectOrderInfo({card_payment:{expire_year:c,expire_month:p}})}})})]}),t.jsxs(i,{children:[t.jsx("div",{className:"title",children:"비밀번호 (2자리)"}),t.jsx("div",{className:"content",children:t.jsx(n,{inputType:"password",maxlength:2,placeholder:"••",value:s.directOrderInfo?.card_payment?.password||"",onChange:r=>{s.setDirectOrderInfo({card_payment:{password:r.target.value}})}})})]}),t.jsxs(i,{children:[t.jsx("div",{className:"title",children:"할부기간"}),t.jsx("div",{className:"content",children:t.jsx(I,{placeholder:"할부기간",option:k,type:"solid",value:s.directOrderInfo?.card_payment?.installment_months||"0",onChange:async r=>{s.setDirectOrderInfo({card_payment:{installment_months:r.target.value}})}})})]})]})})]})]})]})}),O=a.div`
  display: flex;
  gap: 50px;
  & + & {
    margin-top: 50px;
  }
`,j=a.article`
  flex: 1;
`,C=a.article`
  & + & {
    margin-top: 50px;
  }
`,R=a.div`
  display: flex;
  justify-content: space-between;
  margin-top: 20px;
`,N=a.div`
  display: flex;
  justify-content: space-between;
`,F=a.div`
  display: flex;
  margin: 20px 0;
`,A=a.div`
  margin-top: 10px;
`;export{U as default};
