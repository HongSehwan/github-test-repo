import{o as b,a as B,b as w,u as v,p as F,r as C,j as a,a6 as L,q as I,N as g,B as o,t as y,T as M,v as z,S as A,a7 as f,I as D,F as O,G as R,a5 as _,a0 as k,a8 as E,w as N,a9 as $,x as W,y as G}from"./index-_13rErVL.js";const Q=b(()=>{const d=B(),n=w(),{productStore:e,ingredientStore:p,confirmStore:h}=v(),j=F(n.search),[m,s]=C.useState(""),S=async(t,r,c,l=void 0)=>{try{let i="";if(!e.tableBaseStore.searchParams.selectSearch?.selectType){x("");return}l&&(s(""),e.clearParams(),d("/ingredient/master-product-list"));let u=e.tableBaseStore.searchParams.selectSearch;r&&(u.size=r),t&&(u.page=t),c&&(u.sort=c);const T=W(u),P=G(T);m&&e.tableBaseStore.searchParams.selectSearch?.selectType==="no"&&(i=`/${m}`),d(`${n.pathname}${P}`),await e.productsFetchTable(`products${i}`,P,!0)}catch(i){console.log(i)}};C.useEffect(()=>{const t=new URLSearchParams(n.search),r=t.get("selectType"),c=t.get("no"),l=t.get("name");return r&&(e.tableBaseStore.searchParams.selectSearch||(e.tableBaseStore.searchParams.selectSearch={}),e.tableBaseStore.searchParams.selectSearch.selectType=r),c?s(c):l&&s(l),e.setProductCurrentParams("products",j).then(),e.nutrientsFetchTable("nutrients","?size=1000").then(),p.setCodeGroupItemList("code-group-items").then(),p.setCodeGroupCurrentParams("code-groups","").then(),()=>{e.productStoreClear()}},[]);const x=t=>{e.tableBaseStore.searchParams.selectSearch?.selectType==="name"?(e.tableBaseStore.setParamsChange("name",t,!0),e.tableBaseStore.setParamsChange("no","",!0)):(e.tableBaseStore.setParamsChange("no",t,!0),e.tableBaseStore.setParamsChange("name","",!0)),s(t)};return a.jsxs(a.Fragment,{children:[a.jsxs(L,{children:[a.jsx(I,{title:"마스터 상품 조회"}),a.jsx(g,{children:a.jsx(o,{type:"fill",size:"xxl"})})]}),a.jsxs(y,{children:[a.jsx(M,{children:a.jsxs(z,{children:[a.jsx("div",{className:"title",children:"검색어"}),a.jsxs("div",{className:"content",children:[a.jsx(A,{option:f,size:"m",type:"solid",round:!0,placeholder:"선택",onChange:async t=>{await e.tableBaseStore.setParamsChange("selectType",t.value,!0)},value:f.find(t=>t.value===e.tableBaseStore.searchParams.selectSearch?.selectType)||null}),a.jsx(D,{inputType:"text",placeholder:"검색어를 입력해 주세요.",width:"fill",onChange:t=>{x(t.target.value)},value:m})]})]})}),a.jsxs(O,{children:[a.jsx(o,{type:"solid",size:"xl",text:"초기화",icon:()=>a.jsx(R,{color:"#899854",size:16}),onClickFunc:async()=>{await S(1,10,"desc",!0)}}),a.jsx(o,{type:"fill",size:"xl",text:"검색",onClickFunc:async()=>{await S(1,void 0,e.tableBaseStore.searchParams.sort,!1)}})]})]}),a.jsxs(y,{children:[a.jsxs(g,{className:"bt",$gap:10,children:[a.jsx(o,{type:"fill",size:"m",text:"상품등록",round:!0,onClickFunc:()=>{e.productDetailModalClear(),_().openModal({...k.MASTER_PRODUCT_DETAIL_MODAL("","register",!1),closeFunc:t=>{t(),E().productDetailModalClear()}})}}),a.jsx(o,{type:"solid",size:"m",text:"삭제",round:!0,onClickFunc:async()=>{h.openConfirm({confirmText:"확인",cancelText:"취소",text:"삭제하시겠습니까?",confirmFunc:async()=>{await e.removeProduct("masterProductList"),await e.setProductCurrentParams("products","").then(),await e.clearParams(),d(`${n.pathname}`),h.clear(),s("")},cancelFunc:()=>{h.clear()}})}})]}),a.jsx(N,{data:e.items,columns:$,offset:e.tableBaseStore.searchParams.page,dataAllCount:e.listPageInfo?.total_elements,store:e,checkType:"masterProductList"})]})]})});export{Q as default};
